(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{1752:function(e,t,a){"use strict";a.r(t);a(113);var n,i,l=a(43),r=(a(483),a(326)),c=a(25),d=a(17),s=a(18),o=a(21),u=a(19),p=a(20),m=(a(248),a(126)),h=a(0),f=a.n(h),g=a(321),b=a(56),S=a(75),y=Object(b.a)({ajax:!0,modal:{title:function(e){return e.isEdit?"\u4fee\u6539":"\u6dfb\u52a0"}}})(n=m.a.create()(n=function(e){function t(){var e,a;Object(d.a)(this,t);for(var n=arguments.length,i=new Array(n),l=0;l<n;l++)i[l]=arguments[l];return(a=Object(o.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(i)))).state={loading:!1,data:{}},a.fetchData=function(){if(!a.state.loading){var e=a.props.id;a.setState({loading:!0}),a.props.ajax.get("/user-center/".concat(e)).then(function(e){a.setState({data:e||{}})}).finally(function(){return a.setState({loading:!1})})}},a.handleSubmit=function(){a.state.loading||a.props.form.validateFieldsAndScroll(function(e,t){if(!e){var n=a.props.isEdit,i=n?"\u4fee\u6539\u6210\u529f\uff01":"\u6dfb\u52a0\u6210\u529f\uff01",l=n?a.props.ajax.put:a.props.ajax.post,r=n?"/user":"/user-center";a.setState({loading:!0}),l(r,t,{successTip:i}).then(function(){var e=a.props.onOk;e&&e()}).finally(function(){return a.setState({loading:!1})})}})},a}return Object(p.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){this.props.isEdit&&this.fetchData()}},{key:"render",value:function(){var e=this.props,t=e.isEdit,a=e.form,n=this.state,i=n.loading,l=n.data,r={labelWidth:100,form:a};return f.a.createElement(S.h,{loading:i,okText:"\u4fdd\u5b58",cancelText:"\u91cd\u7f6e",onOk:this.handleSubmit,onCancel:function(){return a.resetFields()}},f.a.createElement(m.a,{onSubmit:this.handleSubmit},t?f.a.createElement(S.e,Object.assign({},r,{type:"hidden",field:"id",initialValue:l.id})):null,f.a.createElement(S.e,Object.assign({},r,{label:"account",field:"account",initialValue:l.account,required:!0,maxLength:255})),f.a.createElement(S.e,Object.assign({},r,{type:"password",label:"\u5bc6\u7801",field:"password",initialValue:l.password,required:!0,maxLength:255})),f.a.createElement(S.e,Object.assign({},r,{label:"\u7528\u6237\u540d",field:"name",initialValue:l.name,maxLength:20})),f.a.createElement(S.e,Object.assign({},r,{type:"mobile",label:"\u624b\u673a",field:"mobile",initialValue:l.mobile,maxLength:20})),f.a.createElement(S.e,Object.assign({},r,{type:"email",label:"\u90ae\u7bb1",field:"email",initialValue:l.email,required:!0,maxLength:50})),f.a.createElement(S.e,Object.assign({},r,{type:"switch",label:"\u662f\u5426\u542f\u7528",field:"enabled",initialValue:l.enabled})),f.a.createElement(S.e,Object.assign({},r,{type:"switch",label:"\u662f\u5426\u5220\u9664",field:"is_deleted",initialValue:l.is_deleted,required:!0})),f.a.createElement(S.e,Object.assign({},r,{type:"date",label:"\u521b\u5efa\u65f6\u95f4",field:"created_at",initialValue:l.created_at,required:!0})),f.a.createElement(S.e,Object.assign({},r,{type:"date",label:"\u66f4\u65b0\u65f6\u95f4",field:"updated_at",initialValue:l.updated_at,required:!0}))))}}]),t}(h.Component))||n)||n;a.d(t,"default",function(){return j});var j=Object(b.a)({path:"/user-center",ajax:!0})(i=m.a.create()(i=function(e){function t(){var e,a;Object(d.a)(this,t);for(var n=arguments.length,i=new Array(n),l=0;l<n;l++)i[l]=arguments[l];return(a=Object(o.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(i)))).state={loading:!1,dataSource:[],selectedRowKeys:[],total:0,pageNum:1,pageSize:10,singleDeleting:{},visible:!1,id:null},a.columns=[{title:"account",dataIndex:"account",width:200},{title:"\u5bc6\u7801",dataIndex:"password",width:200},{title:"\u7528\u6237\u540d",dataIndex:"name",width:200},{title:"\u624b\u673a",dataIndex:"mobile",width:200},{title:"\u90ae\u7bb1",dataIndex:"email",width:200},{title:"\u662f\u5426\u542f\u7528",dataIndex:"enabled",width:200},{title:"\u662f\u5426\u5220\u9664",dataIndex:"is_deleted",width:200},{title:"\u521b\u5efa\u65f6\u95f4",dataIndex:"created_at",width:200},{title:"\u66f4\u65b0\u65f6\u95f4",dataIndex:"updated_at",width:200}],a.handleSearch=function(e){e&&e.preventDefault(),a.state.loading||a.props.form.validateFieldsAndScroll(function(e,t){if(!e){var n=a.state,i=n.pageNum,l=n.pageSize,r=Object(c.a)({},t,{pageNum:i,pageSize:l});a.setState({loading:!0}),a.props.ajax.get("/user-center",r).then(function(e){var t=(null===e||void 0===e?void 0:e.list)||[],n=(null===e||void 0===e?void 0:e.total)||0;a.setState({dataSource:t,total:n})}).finally(function(){return a.setState({loading:!1})})}})},a.handleBatchDelete=function(){if(!a.state.deleting){var e=a.state.selectedRowKeys,t=f.a.createElement("span",null,"\u60a8\u786e\u5b9a\u5220\u9664",f.a.createElement("span",{style:{padding:"0 5px",color:"red",fontSize:18}},e.length),"\u6761\u8bb0\u5f55\u5417\uff1f");r.a.confirm({title:"\u6e29\u99a8\u63d0\u793a",content:t,onOk:function(){a.setState({deleting:!0}),a.props.ajax.del("/user-center",{ids:e},{successTip:"\u5220\u9664\u6210\u529f\uff01",errorTip:"\u5220\u9664\u5931\u8d25\uff01"}).then(function(){return a.handleSearch()}).finally(function(){return a.setState({deleting:!1})})}})}},a}return Object(p.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){this.handleSearch()}},{key:"render",value:function(){var e=this,t=this.state,a=t.loading,n=t.deleting,i=t.dataSource,r=t.selectedRowKeys,c=t.total,d=t.pageNum,s=t.pageSize,o=t.visible,u=t.id,p=this.props.form,h={form:p,width:220,style:{paddingLeft:16}},b=!(null===r||void 0===r?void 0:r.length);return f.a.createElement(g.a,null,f.a.createElement(S.k,null,f.a.createElement(m.a,{onSubmit:this.handleSearch},f.a.createElement(S.f,null,f.a.createElement(S.e,Object.assign({},h,{label:"\u7528\u6237\u540d",field:"userName"})),f.a.createElement(S.e,Object.assign({},h,{type:"number",label:"\u5e74\u9f84",field:"age"})),f.a.createElement(S.e,Object.assign({},h,{label:"\u5de5\u4f5c",field:"field1"})),f.a.createElement(S.e,Object.assign({},h,{type:"select",label:"\u804c\u4f4d",field:"position",options:[{value:"1",label:"\u9009\u98791"},{value:"2",label:"\u9009\u98792"}]})),f.a.createElement(S.e,{layout:!0,width:"auto"},f.a.createElement(l.a,{type:"primary",htmlType:"submit"},"\u63d0\u4ea4"),f.a.createElement(l.a,{onClick:function(){return p.resetFields()}},"\u91cd\u7f6e"))))),f.a.createElement(S.m,{items:[{type:"primary",icon:"plus",text:"\u6dfb\u52a0",onClick:function(){return e.setState({visible:!0,id:null})}},{type:"danger",icon:"delete",text:"\u5220\u9664",loading:n,disabled:b,onClick:this.handleBatchDelete}]}),f.a.createElement(S.l,{serialNumber:!0,rowSelection:{selectedRowKeys:r,onChange:function(t){return e.setState({selectedRowKeys:t})}},loading:a,columns:this.columns,dataSource:i,rowKey:"id",pagination:!1}),f.a.createElement(S.j,{total:c,pageNum:d,pageSize:s,onPageNumChange:function(t){return e.setState({pageNum:t},e.handleSearch)},onPageSizeChange:function(t){return e.setState({pageSize:t,pageNum:1},e.handleSearch)}}),f.a.createElement(y,{visible:o,id:u,isEdit:null!==u,onOk:function(){return e.setState({visible:!1},e.handleSearch)},onCancel:function(){return e.setState({visible:!1})}}))}}]),t}(h.Component))||i)||i}}]);
//# sourceMappingURL=14.a29a3fe3.chunk.js.map