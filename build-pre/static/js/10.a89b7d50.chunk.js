(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{1721:function(e,t,a){},1753:function(e,t,a){"use strict";a.r(t);var n,l,i=a(41),r=(a(63),a(8)),c=a(17),o=a(18),d=a(21),s=a(19),u=a(20),p=(a(248),a(126)),m=a(0),f=a.n(m),h=a(56),b=a(321),y=a(402),v=a(102),k=a(75),g=(a(481),a(322)),E=(a(482),a(323)),j=(a(113),a(43)),O=Object(k.n)({width:700,title:function(e){var t=e.data,a=void 0===t?{}:t,n=a.key;return"1"===a.type?n?"\u7f16\u8f91\u83dc\u5355":"\u6dfb\u52a0\u83dc\u5355":n?"\u7f16\u8f91\u529f\u80fd":"\u6dfb\u52a0\u529f\u80fd"}})(n=Object(h.a)({ajax:!0})(n=p.a.create()(n=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,l=new Array(n),i=0;i<n;i++)l[i]=arguments[i];return(a=Object(d.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(l)))).state={loading:!1,iconVisible:!1},a.handleOk=function(e){e.preventDefault(),a.props.form.validateFieldsAndScroll(function(e,t){if(!e){console.log("Received values of form: ",t);var n=t.key?a.props.ajax.put:a.props.ajax.post,l=a.props.onOk;a.setState({loading:!0}),n("/menus",t).then(function(){a.setState({visible:!1}),l&&l()}).finally(function(){return a.setState({loading:!1})})}})},a.handleReset=function(){a.props.form.resetFields()},a.handleCancel=function(){var e=a.props.onCancel;e&&e()},a}return Object(u.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this.props,t=e.form,a=e.data,n=this.state.loading,l="1"===(t.getFieldValue("type")||a.type||"1"),i={form:t,labelWidth:70};return f.a.createElement(k.h,{surplusSpace:!1,loading:n,footer:f.a.createElement(m.Fragment,null,f.a.createElement(j.a,{onClick:this.handleOk,type:"primary"},"\u4fdd\u5b58"),f.a.createElement(j.a,{onClick:this.handleReset},"\u91cd\u7f6e"),f.a.createElement(j.a,{onClick:this.handleCancel},"\u53d6\u6d88"))},f.a.createElement(p.a,{style:{padding:16}},f.a.createElement(k.e,Object.assign({},i,{type:"hidden",field:"key",initialValue:a.key})),f.a.createElement(k.e,Object.assign({},i,{type:"hidden",field:"parentKey",initialValue:a.parentKey})),f.a.createElement(k.e,Object.assign({},i,{type:"hidden",field:"type",initialValue:a.type||"1"})),f.a.createElement(g.a,null,f.a.createElement(E.a,{span:12},f.a.createElement(k.e,Object.assign({},i,{label:"\u540d\u79f0",field:"text",initialValue:a.text,required:!0}))),l?f.a.createElement(E.a,{span:12},f.a.createElement(k.e,Object.assign({},i,{label:"\u56fe\u6807",field:"icon",initialValue:a.icon}),f.a.createElement(k.g,null))):f.a.createElement(E.a,{span:12},f.a.createElement(k.e,Object.assign({},i,{label:"\u7f16\u7801",field:"code",required:!0,initialValue:a.code,labelTip:"\u552f\u4e00\u6807\u8bc6\uff0c\u786c\u7f16\u7801\uff0c\u524d\u7aef\u4e00\u822c\u4f1a\u7528\u4e8e\u63a7\u5236\u6309\u94ae\u662f\u5426\u663e\u793a\u3002"})))),f.a.createElement(g.a,null,f.a.createElement(E.a,{span:12},f.a.createElement(k.e,Object.assign({},i,{label:"path",field:"path",initialValue:a.path,labelTip:"\u83dc\u5355\u5bf9\u5e94\u7684\u9875\u9762\u5730\u5740\uff0c\u6216\u8005\u529f\u80fd\u5bf9\u5e94\u7684\u9875\u9762\u5730\u5740\u3002\u524d\u7aef\u4f1a\u57fa\u4e8e\u7528\u6237\u6240\u62e5\u6709\u7684path\uff0c\u5bf9\u8def\u7531\u8fdb\u884c\u8fc7\u6ee4\u3002"}))),l?f.a.createElement(E.a,{span:12},f.a.createElement(k.e,Object.assign({},i,{label:"\u6392\u5e8f",type:"number",field:"order",initialValue:a.order,min:0,step:1}))):null),l?f.a.createElement(g.a,null,f.a.createElement(E.a,{span:12},f.a.createElement(k.e,Object.assign({},i,{label:"url",field:"url",initialValue:a.url}))),f.a.createElement(E.a,{span:12},f.a.createElement(k.e,Object.assign({},i,{type:"select",label:"target",field:"target",initialValue:a.target,options:[{value:"",label:"\u9879\u76ee\u5185\u90e8\u7a97\u53e3"},{value:"_self",label:"\u66ff\u6362\u5f53\u524d\u7a97\u53e3"},{value:"_blank",label:"\u6253\u5f00\u65b0\u7a97\u53e3"}]})))):null))}}]),t}(m.Component))||n)||n)||n;a(1721);a.d(t,"default",function(){return x});var x=Object(h.a)({path:"/menu-permission",title:{text:"\u83dc\u5355&\u6743\u9650",icon:"lock"},ajax:!0})(l=p.a.create()(l=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,l=new Array(n),i=0;i<n;i++)l[i]=arguments[i];return(a=Object(d.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(l)))).state={loading:!1,menus:[],visible:!1,record:{},iconVisible:!1},a.columns=[{title:"\u540d\u79f0",dataIndex:"text",key:"text",width:300,render:function(e,t){var a=t.icon;return a?f.a.createElement("span",null,f.a.createElement(r.a,{type:a})," ",e):e}},{title:"path",dataIndex:"path",key:"path",width:250},{title:"url",dataIndex:"url",key:"url"},{title:"target",dataIndex:"target",key:"target",width:60},{title:"\u7c7b\u578b",dataIndex:"type",key:"type",width:60,render:function(e){return"1"===e?"\u83dc\u5355":"2"===e?"\u529f\u80fd":"\u83dc\u5355"}},{title:"\u529f\u80fd\u7f16\u7801",dataIndex:"code",key:"code",width:100},{title:"\u6392\u5e8f",dataIndex:"order",key:"order",width:60},{title:"\u64cd\u4f5c",dataIndex:"operator",key:"operator",width:150,render:function(e,t){var n=[{label:"\u7f16\u8f91",icon:"form",onClick:function(){return a.setState({data:t,visible:!0})}},{label:"\u5220\u9664",icon:"delete",color:"red",confirm:{title:"\u60a8\u8bf7\u786e\u5b9a\u8981\u5220\u9664\u6b64\u8282\u70b9\u53ca\u5176\u5b50\u8282\u70b9\u5417\uff1f",onConfirm:function(){return a.handleDeleteNode(t)}}},{label:"\u6dfb\u52a0\u5b50\u83dc\u5355",icon:"folder-add",onClick:function(){return a.setState({data:{parentKey:t.key,type:"1"},visible:!0})}},{label:"\u6dfb\u52a0\u5b50\u529f\u80fd",icon:"file-add",onClick:function(){return a.setState({data:{parentKey:t.key,type:"2"},visible:!0})}}];return f.a.createElement(k.i,{items:n})}}],a.handleAddTopMenu=function(){a.setState({data:{type:"1"},visible:!0})},a.handleDeleteNode=function(e){var t=e.key;a.setState({loading:!0}),a.props.ajax.del("/menus/".concat(t)).then(function(){a.setState({visible:!1}),a.handleSearch()}).finally(function(){return a.setState({loading:!1})})},a}return Object(u.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){this.handleSearch()}},{key:"handleSearch",value:function(){var e=this;Object(y.a)().then(function(t){var a=Object(i.a)(t).sort(function(e,t){var a=e.order||0,n=t.order||0;return a||n?n-a:e.text>t.text?1:-1}),n=Object(v.a)(a);e.setState({menus:n})})}},{key:"render",value:function(){var e=this,t=this.state,a=t.menus,n=t.visible,l=t.loading,i=t.data;return f.a.createElement(b.a,{className:"root-2CcLF"},f.a.createElement(k.m,{items:[{type:"primary",text:"\u6dfb\u52a0\u9876\u7ea7",icon:"plus",onClick:this.handleAddTopMenu}]}),f.a.createElement(k.l,{loading:l,columns:this.columns,dataSource:a,pagination:!1}),f.a.createElement(O,{visible:n,data:i,onOk:function(){return e.setState({visible:!1},e.handleSearch)},onCancel:function(){return e.setState({visible:!1})}}))}}]),t}(m.Component))||l)||l}}]);
//# sourceMappingURL=10.a89b7d50.chunk.js.map