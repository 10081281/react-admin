(window.webpackJsonp=window.webpackJsonp||[]).push([[16],{1747:function(e,t,n){"use strict";n.r(t);n(113);var a,i,r=n(43),l=(n(483),n(326)),o=n(25),u=n(17),c=n(18),s=n(21),d=n(19),g=n(20),m=(n(248),n(126)),f=n(0),h=n.n(f),p=n(321),v=n(56),b=n(75),S=n(55),j=/^(\d|[1-9]\d|1\d{2}|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d{2}|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d{2}|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d{2}|2[0-4]\d|25[0-5])$/,y=/^([0-9]|[1-9]\d{1,3}|[1-5]\d{4}|6[0-4]\d{4}|65[0-4]\d{2}|655[0-2]\d|6553[0-5])$/,O=/^1\d{10}$/,x=/^([0-9]{3,4}-)?[0-9]{7,8}$/,E=/^[1-9][0-9]{4,9}$/,k=/(^\d{15}$)|(^\d{17}([0-9]|X|x)$)/,w=/^[1-9]\d*$|^0?$/,D=/^[-]?[1-9]\d*$|^0?$/,N=/^[1-9]\d*$/,C=/^(0|[1-9]\d*)(\.\d{1,2})?$/,$=n(227),R=n.n($),T={ip:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"\u8bf7\u8f93\u5165\u6b63\u786e\u7684IP\u5730\u5740\uff01";return{pattern:j,message:e}},port:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"\u8bf7\u8f93\u5165\u6b63\u786e\u7684\u7aef\u53e3\u53f7\uff01";return{pattern:y,message:e}},noSpace:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"\u4e0d\u80fd\u542b\u6709\u7a7a\u683c\uff01";return{validator:function(t,n,a){return/\s/g.test(n)?a(e):a()}}},mobile:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"\u8bf7\u8f93\u5165\u6b63\u786e\u7684\u624b\u673a\u53f7\uff01";return{pattern:O,message:e}},landline:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"\u8bf7\u8f93\u5165\u6b63\u786e\u7684\u5ea7\u673a\u53f7\uff01";return{pattern:x,message:e}},qq:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"\u8bf7\u8f93\u5165\u6b63\u786e\u7684qq\u53f7\uff01";return{pattern:E,message:e}},cardNumber:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"\u8bf7\u8f93\u5165\u6b63\u786e\u7684\u8eab\u4efd\u8bc1\u53f7\uff01";return{pattern:k,message:e}},email:function(){return{type:"email",message:arguments.length>0&&void 0!==arguments[0]?arguments[0]:"\u8bf7\u8f93\u5165\u6b63\u786e\u7684\u90ae\u7bb1\uff01"}},number:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"\u8bf7\u8f93\u5165\u6570\u5b57.";return{pattern:w,message:e}},integer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"\u8bf7\u8f93\u5165\u6574\u6570\uff01";return{pattern:D,message:e}},positiveInteger:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"\u8bf7\u8f93\u5165\u6b63\u6574\u6570\uff01";return{pattern:N,message:e}},numberWithTwoDecimal:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"\u8bf7\u8f93\u5165\u6570\u5b57\uff0c\u4fdd\u5b58\u4e24\u4f4d\u5c0f\u6570.";return{pattern:C,message:e}},numberRange:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"\u8bf7\u8f93\u5165{min}\u5230{max}\u4e4b\u95f4\u7684\u503c.";return{validator:function(a,i,r){return i&&((i=Number(i))||0===i)?void(i<e||i>t?r(Object(S.k)(n,{min:e,max:t})):r()):r()}}},numberMaxRange:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"\u4e0d\u80fd\u5927\u4e8e{max}";return{validator:function(n,a,i){return a&&((a=Number(a))||0===a)?void(a>e?i(Object(S.k)(t,{max:e})):i()):i()}}},numberMinRange:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"\u4e0d\u80fd\u5c0f\u4e8e{min}";return{validator:function(n,a,i){return a&&((a=Number(a))||0===a)?void(a<e?i(Object(S.k)(t,{min:e})):i()):i()}}},stringByteRangeLength:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"\u8bf7\u8f93\u5165 {min}-{max} \u4e2a\u5b57\u7b26(\u6c49\u5b57\u7b972\u4e2a\u5b57\u7b26).";return{validator:function(a,i,r){if(!i)return r();var l=Object(S.h)(i);l<e||l>t?r(Object(S.k)(n,{min:e,max:t})):r()}}},stringByteMinLength:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"\u6700\u5c11\u8f93\u5165{min}\u4e2a\u5b57\u7b26(\u6c49\u5b57\u7b972\u4e2a\u5b57\u7b26).";return{validator:function(n,a,i){if(!a)return i();Object(S.h)(a)<e?i(Object(S.k)(t,{min:e})):i()}}},stringByteMaxLength:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"\u6700\u591a\u8f93\u5165{max}\u4e2a\u5b57\u7b26(\u6c49\u5b57\u7b972\u4e2a\u5b57\u7b26).";return{validator:function(n,a,i){if(!a)return i();Object(S.h)(a)>e?i(Object(S.k)(t,{max:e})):i()}}},arrayMaxLength:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"\u6700\u591a{max}\u4e2a\u503c";return{validator:function(n,a,i){if(!a||!Array.isArray(a))return i();a.length>e?i(Object(S.k)(t,{max:e})):i()}}},userNameExist:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"_userNameExit",t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"\u7528\u6237\u540d\u91cd\u590d";return this[e]||(this[e]=R.a.debounce(function(e,a,i){return a?t&&a===t?i():(console.log("\u53d1\u8bf7\u6c42"),"1"===a?i(n):void i()):i()},500)),{validator:this[e]}}},z=Object(v.a)({ajax:!0,modal:{title:function(e){return e.isEdit?"\u4fee\u6539\u7528\u6237":"\u6dfb\u52a0\u7528\u6237"}}})(a=m.a.create()(a=function(e){function t(){var e,n;Object(u.a)(this,t);for(var a=arguments.length,i=new Array(a),r=0;r<a;r++)i[r]=arguments[r];return(n=Object(s.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(i)))).state={loading:!1,data:{}},n.fetchData=function(){if(!n.state.loading){var e=n.props.id;n.setState({loading:!0}),n.props.ajax.get("/mock/users/".concat(e)).then(function(e){n.setState({data:e||{}})}).finally(function(){return n.setState({loading:!1})})}},n.handleSubmit=function(){n.state.loading||n.props.form.validateFieldsAndScroll(function(e,t){if(!e){var a=n.props.isEdit,i=a?n.props.ajax.put:n.props.ajax.post,r=a?"\u4fee\u6539\u6210\u529f\uff01":"\u6dfb\u52a0\u6210\u529f\uff01";console.log(a),n.setState({loading:!0}),i("/mock/users",t,{successTip:r}).then(function(){var e=n.props.onOk;e&&e()}).finally(function(){return n.setState({loading:!1})})}})},n}return Object(g.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.props.isEdit&&this.fetchData()}},{key:"render",value:function(){var e=this.props,t=e.isEdit,n=e.form,a=this.state,i=a.loading,r=a.data,l={labelWidth:100,form:n};return h.a.createElement(b.h,{loading:i,okText:"\u4fdd\u5b58",cancelText:"\u91cd\u7f6e",onOk:this.handleSubmit,onCancel:function(){return n.resetFields()}},h.a.createElement(m.a,{onSubmit:this.handleSubmit},t?h.a.createElement(b.e,Object.assign({},l,{type:"hidden",field:"id",initialValue:r.id})):null,h.a.createElement(b.e,Object.assign({},l,{label:"\u7528\u6237\u540d",field:"name",initialValue:r.name,required:!0,noSpace:!0,rules:[T.userNameExist()]})),h.a.createElement(b.e,Object.assign({},l,{type:"number",label:"\u5e74\u9f84",field:"age",initialValue:r.age,required:!0})),h.a.createElement(b.e,Object.assign({},l,{type:"select",label:"\u5de5\u4f5c",field:"job",initialValue:r.job,options:[{value:"1",label:"\u524d\u7aef\u5f00\u53d1"},{value:"2",label:"\u540e\u7aef\u5f00\u53d1"}]})),h.a.createElement(b.e,Object.assign({},l,{type:"select",label:"\u804c\u4f4d",field:"position",initialValue:r.position,options:[{value:"1",label:"\u5458\u5de5"},{value:"2",label:"CEO"}]}))))}}]),t}(f.Component))||a)||a;n.d(t,"default",function(){return I});var I=Object(v.a)({path:"/users",ajax:!0})(i=m.a.create()(i=function(e){function t(){var e,n;Object(u.a)(this,t);for(var a=arguments.length,i=new Array(a),r=0;r<a;r++)i[r]=arguments[r];return(n=Object(s.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(i)))).state={loading:!1,dataSource:[],selectedRowKeys:[],total:0,pageNum:1,pageSize:10,deleting:!1,singleDeleting:{},visible:!1,id:null},n.columns=[{title:"\u7528\u6237\u540d",dataIndex:"name",width:200},{title:"\u5e74\u9f84",dataIndex:"age",width:200},{title:"\u5de5\u4f5c",dataIndex:"job",width:200},{title:"\u804c\u4f4d",dataIndex:"position",width:200},{title:"\u64cd\u4f5c",dataIndex:"operator",width:100,render:function(e,t){var a=t.id,i=t.name,r=[{label:"\u7f16\u8f91",onClick:function(){return n.setState({visible:!0,id:a})}},{label:"\u5220\u9664",color:"red",loading:n.state.singleDeleting[a],confirm:{title:'\u60a8\u786e\u5b9a\u5220\u9664"'.concat(i,'"?'),onConfirm:function(){return n.handleDelete(a)}}}];return h.a.createElement(b.i,{items:r})}}],n.handleSearch=function(e){e&&e.preventDefault(),n.state.loading||n.props.form.validateFieldsAndScroll(function(e,t){if(!e){var a=n.state,i=a.pageNum,r=a.pageSize,l=Object(o.a)({},t,{pageNum:i,pageSize:r});n.setState({loading:!0}),n.props.ajax.get("/mock/users",l).then(function(e){var t=(null===e||void 0===e?void 0:e.list)||[],a=(null===e||void 0===e?void 0:e.total)||0;n.setState({dataSource:t,total:a})}).finally(function(){return n.setState({loading:!1})})}})},n.handleDelete=function(e){var t=Object(o.a)({},n.state.singleDeleting);t[e]||(t[e]=!0,n.setState({singleDeleting:t}),n.props.ajax.del("/mock/users/".concat(e),null,{successTip:"\u5220\u9664\u6210\u529f\uff01",errorTip:"\u5220\u9664\u5931\u8d25\uff01"}).then(function(){return n.handleSearch()}).finally(function(){t[e]=!1,n.setState({singleDeleting:t})}))},n.handleBatchDelete=function(){if(!n.state.deleting){var e=n.state.selectedRowKeys,t=h.a.createElement("span",null,"\u60a8\u786e\u5b9a\u5220\u9664",h.a.createElement("span",{style:{padding:"0 5px",color:"red",fontSize:18}},e.length),"\u6761\u8bb0\u5f55\u5417\uff1f");l.a.confirm({title:"\u6e29\u99a8\u63d0\u793a",content:t,onOk:function(){n.setState({deleting:!0}),n.props.ajax.del("/mock/users",{ids:e},{successTip:"\u5220\u9664\u6210\u529f\uff01",errorTip:"\u5220\u9664\u5931\u8d25\uff01"}).then(function(){return n.handleSearch()}).finally(function(){return n.setState({deleting:!1})})}})}},n}return Object(g.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.handleSearch()}},{key:"render",value:function(){var e=this,t=this.state,n=t.loading,a=t.deleting,i=t.dataSource,l=t.selectedRowKeys,o=t.total,u=t.pageNum,c=t.pageSize,s=t.visible,d=t.id,g=this.props.form,f={form:g,width:300,style:{paddingLeft:16}},v=!(null===l||void 0===l?void 0:l.length);return h.a.createElement(p.a,null,h.a.createElement(b.k,null,h.a.createElement(m.a,{onSubmit:this.handleSearch},h.a.createElement(b.f,null,h.a.createElement(b.e,Object.assign({},f,{label:"\u540d\u79f0",field:"name"})),h.a.createElement(b.e,Object.assign({},f,{type:"select",label:"\u804c\u4f4d",field:"job",options:[{value:1,label:1},{value:2,label:2}]})),h.a.createElement(b.e,{layout:!0,width:"auto"},h.a.createElement(r.a,{type:"primary",htmlType:"submit"},"\u63d0\u4ea4"),h.a.createElement(r.a,{onClick:function(){return g.resetFields()}},"\u91cd\u7f6e"))))),h.a.createElement(b.m,{items:[{type:"primary",icon:"plus",text:"\u6dfb\u52a0",onClick:function(){return e.setState({visible:!0,id:null})}},{type:"danger",icon:"delete",text:"\u5220\u9664",loading:a,disabled:v,onClick:this.handleBatchDelete}]}),h.a.createElement(b.l,{rowSelection:{selectedRowKeys:l,onChange:function(t){return e.setState({selectedRowKeys:t})}},loading:n,columns:this.columns,dataSource:i,rowKey:"id",pagination:!1}),h.a.createElement(b.j,{total:o,pageNum:u,pageSize:c,onPageNumChange:function(t){return e.setState({pageNum:t},e.handleSearch)},onPageSizeChange:function(t){return e.setState({pageSize:t,pageNum:1},e.handleSearch)}}),h.a.createElement(z,{visible:s,id:d,isEdit:null!==d,onOk:function(){return e.setState({visible:!1},e.handleSearch)},onCancel:function(){return e.setState({visible:!1})}}))}}]),t}(f.Component))||i)||i}}]);
//# sourceMappingURL=16.8f4f86c6.chunk.js.map